# Keeping out the SOQL from the code
PARTICIPANTS_BY_EMAILS_AND_RECORD: >
  SELECT
    Id,
    Student_Waiver_Signed__c,
    Cohort__r.Name,
    Cohort_Schedule__r.Id,
    Cohort_Schedule__r.Letter__c,
    Cohort_Schedule__r.Webinar_Registration_1__c,
    Cohort_Schedule__r.Webinar_Registration_2__c,
    Program__r.Id,
    Program__r.Session__c,
    Contact__r.Email,
    Contact__r.Preferred_First_Name__c,
    Contact__r.Name
  FROM
    Participant__c
  WHERE
    Contact__r.Email IN (
      %{email_list}
    )
    AND RecordTypeId = %{record_type_id}
    AND Status__c = 'Enrolled'

LAST_PARTICIPANT_BY_EMAIL_AND_RECORD: >
  SELECT
    Id,
    Student_Waiver_Signed__c,
    Cohort__r.Name,
    Cohort_Schedule__r.Id,
    Cohort_Schedule__r.Letter__c,
    Cohort_Schedule__r.Webinar_Registration_1__c,
    Cohort_Schedule__r.Webinar_Registration_2__c,
    Program__r.Id,
    Program__r.Session__c,
    Contact__r.Email,
    Contact__r.Preferred_First_Name__c,
    Contact__r.Name
  FROM
    Participant__c
  WHERE
    Contact__r.Email = %{email}
    AND RecordTypeId = %{record_type_id}
  ORDER BY 
    Id DESC
  LIMIT 1

FIRST_RECORD_TYPE: >
  SELECT 
    Id
  FROM
    RecordType
  WHERE 
    sObjectType = %{s_object_type}
    AND DeveloperName = %{developer_name}
  LIMIT 1

PARTICIPANT_COUNT_BY_COHORT_AND_SCHEDULE: >
  SELECT
    COUNT(Id)
  FROM
    Participant__c
  WHERE
    Cohort_Schedule__c = %{cohort_schedule_id}
    AND Cohort__c = %{cohort_id}

LAST_COHORT_BY_SCHEDULE_AND_PROGRAM: >
  SELECT
    Id,
    Name,
    Peer_Group_ID__c
  FROM
    Cohort__c
  WHERE
    Cohort_Schedule__c = %{cohort_schedule_id}
    AND Program__c = %{program_id}
  ORDER BY
    Peer_Group_ID__c DESC
  LIMIT 1
